–ö–æ–Ω–µ—á–Ω–æ! –ù–∏–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω **—Ä–∞–∑–¥–µ–ª "–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ"** —Å —è–∫–æ—Ä–Ω—ã–º–∏ —Å—Å—ã–ª–∫–∞–º–∏ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–µ—Ä–µ—Ö–æ–¥–∞ –∫ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º —Ç–µ–º–∞–º:

---

# üìö –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [üì¶ –í–≤–µ–¥–µ–Ω–∏–µ](#-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è-–ø–æ-createreactstore)
- [üîß –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è `createReactStore`](#-–æ—Å–Ω–æ–≤–Ω–∞—è-—Ñ—É–Ω–∫—Ü–∏—è)
- [üß© –•—É–∫ `useStore`](#-—Ö—É–∫-usestore)
- [üß∑ –•—É–∫ `useField`](#-—Ö—É–∫-usefield)
- [üîÅ –ú–µ—Ç–æ–¥ `reloadComponents`](#-–º–µ—Ç–æ–¥-reloadcomponents)
- [üß† –ß—Ç–æ —Ç–∞–∫–æ–µ `CacheKey`?](#-—á—Ç–æ-—Ç–∞–∫–æ–µ-cachekey)
- [üöÄ –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏](#-–ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ-–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏)
- [üéØ –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?](#-–∫–æ–≥–¥–∞-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å)
- [üß™ –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è](#-–ø—Ä–∏–º–µ—Ä-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è)
- [üîë –ü—Ä–∏–º–µ—Ä—ã —Ä–∞–±–æ—Ç—ã —Å `cacheKeys`](#-–ø—Ä–∏–º–µ—Ä—ã-—Ä–∞–±–æ—Ç—ã-—Å-cachekeys)

  - [‚úÖ –ü—Ä–∏–º–µ—Ä 1: `useStore`](#-–ø—Ä–∏–º–µ—Ä-1-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ-cachekeys-–≤-usestore)
  - [‚úÖ –ü—Ä–∏–º–µ—Ä 2: `useField`](#-–ø—Ä–∏–º–µ—Ä-2-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ-cachekeys-–≤-usefield)
  - [üß† –ü—Ä–∏–º–µ—Ä 3: –ö–ª—é—á-—Ñ—É–Ω–∫—Ü–∏—è](#-–ø—Ä–∏–º–µ—Ä-3-–∫–ª—é—á-—Ñ—É–Ω–∫—Ü–∏—è)
  - [üß∞ –ü—Ä–∏–º–µ—Ä 4: –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–ª—é—á–∏](#-–ø—Ä–∏–º–µ—Ä-4-–∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ-cachekeys--paths)

- [‚ö° –ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ?](#-–ø–æ—á–µ–º—É-—ç—Ç–æ-–≤–∞–∂–Ω–æ)
- [üìå –ó–∞–∫–ª—é—á–µ–Ω–∏–µ](#-–∑–∞–∫–ª—é—á–µ–Ω–∏–µ)
- [üß© –§–∏–Ω–∞–ª—å–Ω—ã–π –ø—Ä–∏–º–µ—Ä –∏–≥—Ä—ã 15-–ø–∞–∑–ª](#-—Ñ–∏–Ω–∞–ª—å–Ω—ã–π-–ø—Ä–∏–º–µ—Ä-–∏–≥—Ä—ã-15-–ø–∞–∑–ª)

  - [`store.ts`](#storets--–≥–ª–æ–±–∞–ª—å–Ω–æ–µ-—Ö—Ä–∞–Ω–∏–ª–∏—â–µ-–∏-–ª–æ–≥–∏–∫–∞-–∏–≥—Ä—ã)
  - [`Tile.tsx`](#tiletsx--–æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ-–æ–¥–Ω–æ–π-–ø–ª–∏—Ç–∫–∏)
  - [`PuzzleGame.tsx`](#puzzlegametsx--–æ—Å–Ω–æ–≤–Ω–æ–π-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç-–∏–≥—Ä—ã)
  - [`styles.css`](#stylescss--—Å—Ç–∏–ª–∏-–∏–≥—Ä—ã)

- [üß† –ö–∞–∫ `createReactStore` –¥–µ–ª–∞–µ—Ç –∫–æ–¥ —á–∏—â–µ](#-–∫–∞–∫-createreactstore-–¥–µ–ª–∞–µ—Ç-–∫–æ–¥-—á–∏—â–µ-–∏-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É-–ø—Ä–æ—â–µ)

  - [`createReactStore`](#storets--—Å–æ–∑–¥–∞–Ω–∏–µ-–∏-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ-—Ö—Ä–∞–Ω–∏–ª–∏—â–∞)
  - [–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ `update`](#-–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ-–∑–Ω–∞—á–µ–Ω–∏–π-—Å-update)
  - [–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ `batch`](#-–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞-–æ–±–Ω–æ–≤–ª–µ–Ω–∏–π-—Å-batch)
  - [–ß—Ç–µ–Ω–∏–µ `get`](#-—á—Ç–µ–Ω–∏–µ-—Å–æ—Å—Ç–æ—è–Ω–∏—è-—Å-get)
  - [–ü–æ–¥–ø–∏—Å–∫–∞ `useStore`](#-–ø–æ–¥–ø–∏—Å–∫–∞-–Ω–∞-—á–∞—Å—Ç–∏-—Å–æ—Å—Ç–æ—è–Ω–∏—è-—Å-usestore)
  - [–ü–æ–¥–ø–∏—Å–∫–∞ + –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ `useField`](#-–ø–æ–¥–ø–∏—Å–∫–∞--–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ-—Å-usefield)
  - [–†—É—á–Ω–æ–π –≤—ã–∑–æ–≤ `reloadComponents`](#-—Ä—É—á–Ω–æ–π-–≤—ã–∑–æ–≤-–ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤-—Å-reloadcomponents)

---

# üì¶ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ `createReactStore`

`createReactStore` ‚Äî —ç—Ç–æ –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è –æ–±—ë—Ä—Ç–∫–∞ –Ω–∞–¥ `@qtpy/state-management-observable/types`, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—â–∞—è —É–¥–æ–±–Ω—É—é –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏ **React**. –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ —Å–æ–∑–¥–∞–Ω–∞ —Å —É—á—ë—Ç–æ–º –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ—Å—Ç–∏ –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç–∏.

---

## üîß –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è

```ts
createReactStore<T extends object>(initialState: T): ReactStore<T>
```

–°–æ–∑–¥–∞—ë—Ç —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ —Å –ø–æ–ª–Ω—ã–º API —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∏ —Ö—É–∫–∞–º–∏ –¥–ª—è React-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã:

- `initialState` ‚Äî –Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ç–∏–ø–∞ `T`.

### –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:

–≠–∫–∑–µ–º–ø–ª—è—Ä `ReactStore<T>`, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π:

- –ú–µ—Ç–æ–¥—ã —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ (`get`, `update`, `subscribe`, `transaction`, –∏ –¥—Ä.)
- –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ö—É–∫–∏: `useStore`, `useField`
- –ú–µ—Ç–æ–¥ `reloadComponents` –¥–ª—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–π –ø–µ—Ä–µ—Ä–∏—Å–æ–≤–∫–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –ø–æ `cacheKeys`.

---

## üß© –•—É–∫ `useStore`

```ts
useStore<P extends Paths<T>[]>(paths: [...P], options?: {
  cacheKeys?: CacheKey<T>[];
}): UseStoreReturnType<T, P>
```

–•—É–∫ –¥–ª—è –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—É—Ç–µ–π —Å–æ—Å—Ç–æ—è–Ω–∏—è.

### –ê—Ä–≥—É–º–µ–Ω—Ç—ã:

- `paths`: –º–∞—Å—Å–∏–≤ –ø—É—Ç–µ–π –¥–æ –Ω—É–∂–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `["user.name", "settings.theme"]`)
- `options.cacheKeys`: –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∫–ª—é—á–∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π

### –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:

–ú–∞—Å—Å–∏–≤ –∑–Ω–∞—á–µ–Ω–∏–π, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö —É–∫–∞–∑–∞–Ω–Ω—ã–º –ø—É—Ç—è–º.

### –ü—Ä–∏–º–µ—Ä:

```tsx
const [name, theme] = store.useStore(["user.name", "settings.theme"]);
```

---

## üß∑ –•—É–∫ `useField`

```ts
useField<P extends Paths<T>>(path: P, options?: {
  equalityFn?: (a: any, b: any) => boolean;
  cacheKeys?: CacheKey<T>[];
}): readonly [value: ExtractPathType<T, P>, setValue: (val: ExtractPathType<T, P> | UpdateFn<T, P>) => void]
```

–£–¥–æ–±–Ω—ã–π —Ö—É–∫ –¥–ª—è –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è.

### –ê—Ä–≥—É–º–µ–Ω—Ç—ã:

- `path`: –ø—É—Ç—å –¥–æ –Ω—É–∂–Ω–æ–≥–æ –ø–æ–ª—è
- `equalityFn`: –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –ª–∏—à–Ω–∏—Ö —Ä–µ–Ω–¥–µ—Ä–æ–≤
- `cacheKeys`: –∫–ª—é—á–∏ –¥–ª—è –∫—ç—à-–ø–æ–¥–ø–∏—Å–∫–∏

### –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:

–ö–æ—Ä—Ç–µ–∂ –∏–∑ —Ç–µ–∫—É—â–µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –∏ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è.

### –ü—Ä–∏–º–µ—Ä:

```tsx
const [name, setName] = store.useField("user.name");

setName("–ù–æ–≤–æ–µ –∏–º—è");
```

---

## üîÅ –ú–µ—Ç–æ–¥ `reloadComponents`

```ts
reloadComponents(cacheKeys: CacheKey<T>[]): void
```

–ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ —Ç—Ä–∏–≥–≥–µ—Ä–∏—Ç –ø–µ—Ä–µ—Ä–∏—Å–æ–≤–∫—É –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤, –ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã—Ö –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω—ã–µ `cacheKeys`.

### –ü—Ä–∏–º–µ—Ä:

```ts
store.reloadComponents([["user", "name"]]);
```

---

## üß† –ß—Ç–æ —Ç–∞–∫–æ–µ `CacheKey`?

`CacheKey` ‚Äî —ç—Ç–æ:

- –ø—É—Ç—å (`Paths<T>`, –Ω–∞–ø—Ä–∏–º–µ—Ä: `"user.name"`)
- –º–∞—Å—Å–∏–≤ —Å—Ç—Ä–æ–∫ (`["user", "name"]`)
- —Ñ—É–Ω–∫—Ü–∏—è `(state: T) => string`

–ü–æ–∑–≤–æ–ª—è–µ—Ç –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å, –∏–∑–º–µ–Ω–∏–ª–æ—Å—å –ª–∏ –ª–æ–≥–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ–µ –ø–æ–¥–º–Ω–æ–∂–µ—Å—Ç–≤–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è.

–≠—Ç–æ –º–æ—â–Ω—ã–π —Å–ø–æ—Å–æ–± **–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä–µ—Ä–∏—Å–æ–≤–∫–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤**, –¥–∞–∂–µ –µ—Å–ª–∏ –≤—ã —Å–ª–µ–¥–∏—Ç–µ –∑–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–æ–º –ø—É—Ç–µ–π.

---

## üöÄ –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

–¢–∞–∫ –∫–∞–∫ `createReactStore` –ø–æ—Å—Ç—Ä–æ–µ–Ω –Ω–∞ `createObservableStore`, –≤—ã –ø–æ–ª—É—á–∞–µ—Ç–µ –≤–µ—Å—å –µ–≥–æ API:

### ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞:

- `batch` ‚Äî –ø–∞–∫–µ—Ç–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- `updateAsync`, `updateManyAsync` ‚Äî –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- `optimisticUpdate` ‚Äî –æ–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å –æ—Ç–∫–∞—Ç–æ–º –ø—Ä–∏ –æ—à–∏–±–∫–µ
- `debouncedUpdate` ‚Äî –æ—Ç–ª–æ–∂–µ–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å –æ—Ç–º–µ–Ω–æ–π –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö
- `transaction` ‚Äî –∞—Ç–æ–º–∞—Ä–Ω—ã–µ —Ü–µ–ø–æ—á–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π
- `subscribeToPath` ‚Äî –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –ø—É—Ç—å
- `invalidateCache` ‚Äî –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤

---

## üéØ –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?

`createReactStore` –∏–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç, –µ—Å–ª–∏ –≤—ã:

- —Ö–æ—Ç–∏—Ç–µ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –±–µ–∑ –ª–∏—à–Ω–µ–π –º–∞–≥–∏–∏
- –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ—Ç–µ —è–≤–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (path-based)
- —Ö–æ—Ç–∏—Ç–µ –¥–µ—Ç–∞–ª—å–Ω—É—é –ø–æ–¥–ø–∏—Å–∫—É –Ω–∞ –ø–æ–¥–º–Ω–æ–∂–µ—Å—Ç–≤–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- –∑–∞–±–æ—Ç–∏—Ç–µ—Å—å –æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ –∫–æ–Ω—Ç—Ä–æ–ª–µ –Ω–∞–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏

---

## üß™ –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```tsx
const store = createReactStore({
  user: { name: "–ê–Ω—è", age: 30 },
  settings: { theme: "light" },
});

function Profile() {
  const [name, setName] = store.useField("user.name");

  return (
    <div>
      <p>–ò–º—è: {name}</p>
      <button onClick={() => setName("–û–ª–µ–≥")}>–ò–∑–º–µ–Ω–∏—Ç—å –∏–º—è</button>
    </div>
  );
}
```

–û—Ç–ª–∏—á–Ω–æ! –î–∞–≤–∞–π –¥–æ–±–∞–≤–∏–º –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è **–∫–ª—é—á–µ–π –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è (cacheKeys)** –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫–µ `createReactStore`. –û–Ω–∏ –æ—Å–æ–±–µ–Ω–Ω–æ –ø–æ–ª–µ–∑–Ω—ã –¥–ª—è **—Ç–æ—á–µ—á–Ω–æ–π –ø–µ—Ä–µ—Ä–∏—Å–æ–≤–∫–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤** –∏ **–ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–æ–¥–ø–∏—Å–æ–∫**.

---

# üîë –ü—Ä–∏–º–µ—Ä—ã —Ä–∞–±–æ—Ç—ã —Å `cacheKeys`

## üìå –ß—Ç–æ —Ç–∞–∫–æ–µ `cacheKeys`?

–ö–ª—é—á–∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è ‚Äî —ç—Ç–æ **–º–µ—Ö–∞–Ω–∏–∑–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∞–º–∏**, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π:

- –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥–ø–∏—Å–∫–∏ –ø–æ–¥ –ª–æ–≥–∏—á–µ—Å–∫–∏–º –∏–º–µ–Ω–µ–º
- –æ–±–Ω–æ–≤–ª—è—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Å—Ä–∞–∑—É –ø–æ –∫–ª—é—á—É, –∞ –Ω–µ –ø–æ –ø—É—Ç–∏
- –≤—Ä—É—á–Ω—É—é "–∏–Ω–≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å" —á–∞—Å—Ç—å –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤, –¥–∞–∂–µ –µ—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–µ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

---

## ‚úÖ –ü—Ä–∏–º–µ—Ä 1: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `cacheKeys` –≤ `useStore`

```tsx
const store = createReactStore({
  user: { name: "–ê–Ω—è", age: 30 },
  settings: { theme: "light" },
});

function UserNameDisplay() {
  const [name] = store.useStore(["user.name"], {
    cacheKeys: [["user", "profile"]], // –ª–æ–≥–∏—á–µ—Å–∫–∏–π –∫–ª—é—á
  });

  return <p>–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: {name}</p>;
}
```

–ï—Å–ª–∏ –ø–æ—Ç–æ–º –≤—ã–∑–≤–∞—Ç—å:

```ts
store.reloadComponents([["user", "profile"]]);
```

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç `UserNameDisplay` **—Ñ–æ—Ä—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ –ø–µ—Ä–µ—Ä–∏—Å—É–µ—Ç—Å—è**, –¥–∞–∂–µ –µ—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ `user.name` –Ω–µ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å.

---

## ‚úÖ –ü—Ä–∏–º–µ—Ä 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `cacheKeys` –≤ `useField`

```tsx
function ThemeToggle() {
  const [theme, setTheme] = store.useField("settings.theme", {
    cacheKeys: [["ui", "theme"]],
  });

  return (
    <button onClick={() => setTheme(theme === "light" ? "dark" : "light")}>
      –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É ({theme})
    </button>
  );
}
```

–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ "–æ—Å–≤–µ–∂–∏—Ç—å" –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, –ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–µ –Ω–∞ —Ç–µ–º—É, –º–æ–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å:

```ts
store.reloadComponents([["ui", "theme"]]);
```

---

## üß† –ü—Ä–∏–º–µ—Ä 3: –ö–ª—é—á-—Ñ—É–Ω–∫—Ü–∏—è

```tsx
const store = createReactStore({
  user: { name: "–ò–≤–∞–Ω", status: "online" },
});

const cacheKeyFn = (state: typeof store.getState) => {
  return state.user.status === "online" ? "online-users" : "offline-users";
};

function UserStatusBadge() {
  const [status] = store.useStore(["user.status"], {
    cacheKeys: [cacheKeyFn],
  });

  return <div>{status === "online" ? "üü¢ –í —Å–µ—Ç–∏" : "‚ö™ –ù–µ –≤ —Å–µ—Ç–∏"}</div>;
}
```

–¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ—Ä–∏—Å–æ–≤–∞—Ç—å –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, –∑–∞–≤–∏—Å—è—â–∏–µ –æ—Ç "–ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ" —Å—Ç–∞—Ç—É—Å–∞:

```ts
store.reloadComponents(["online-users"]);
```

---

## üß∞ –ü—Ä–∏–º–µ—Ä 4: –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ `cacheKeys` + `paths`

```tsx
function ComponentA() {
  const [theme, name] = store.useStore(["settings.theme", "user.name"], {
    cacheKeys: [
      ["app", "visuals"],
      ["user", "identity"],
    ],
  });

  return (
    <div>
      {name} –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–µ–º—É: {theme}
    </div>
  );
}
```

–í—ã–∑–æ–≤:

```ts
store.reloadComponents([["user", "identity"]]);
```

—Ç—Ä–∏–≥–≥–µ—Ä–∏—Ç `ComponentA`, –¥–∞–∂–µ –µ—Å–ª–∏ `settings.theme` –Ω–µ –∏–∑–º–µ–Ω–∏–ª—Å—è ‚Äî –ø–æ—Ç–æ–º—É —á—Ç–æ `cacheKeys` –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∫–∞–∫ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ç–æ—á–∫–∞ –ø–æ–¥–ø–∏—Å–∫–∏.

---

## ‚ö° –ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ?

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `cacheKeys` –æ—Å–æ–±–µ–Ω–Ω–æ –∞–∫—Ç—É–∞–ª—å–Ω–æ –¥–ª—è:

- —Å–ª–æ–∂–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–Ω—ã—Ö –¥–µ—Ä–µ–≤—å–µ–≤ (–º–µ–Ω—å—à–µ –ø–æ–¥–ø–∏—Å–æ–∫ = –±—ã—Å—Ç—Ä–µ–µ)
- –∫—ç—à–∏—Ä—É–µ–º—ã—Ö –±–ª–æ–∫–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `React.memo`, `Suspense`)
- —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≥–ª–æ–±–∞–ª—å–Ω—ã–º–∏ —Å–æ–±—ã—Ç–∏—è–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, ‚Äú—Ç–µ–º–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏–∑–º–µ–Ω–∏–ª–∞—Å—å‚Äù)

---

## üìå –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

`createReactStore` ‚Äî —ç—Ç–æ –º–æ—â–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –≤ React, —Å–æ—á–µ—Ç–∞—é—â–∏–π **—Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å**, **–≥–∏–±–∫–æ—Å—Ç—å –ø–æ–¥–ø–∏—Å–æ–∫** –∏ **–≥–∞—Ä–∞–Ω—Ç–∏—é –∫–æ–Ω—Ç—Ä–æ–ª—è –Ω–∞–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏**. –û–Ω –ª–µ–≥–∫–æ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è, –¥—Ä—É–∂–µ–ª—é–±–µ–Ω –∫ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ –¥–∞—ë—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ç–æ—á–µ—á–Ω–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–µ—Ä–µ–Ω–¥–µ—Ä—ã.

---

–û—Ç–ª–∏—á–Ω–æ! –í –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ ‚Äî –ø–æ–ª–Ω—ã–π **—Ñ–∏–Ω–∞–ª—å–Ω—ã–π –ø—Ä–∏–º–µ—Ä** –∏–≥—Ä—ã "15-–ø–∞–∑–ª", –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–π –Ω–∞ `createReactStore`. –≠—Ç–æ—Ç –ø—Ä–∏–º–µ—Ä –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ–Ω, **–∏–ª–ª—é—Å—Ç—Ä–∏—Ä—É–µ—Ç –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏**, –∏ –ø—Ä–∏ —ç—Ç–æ–º –æ—Å—Ç–∞—ë—Ç—Å—è –ª–∞–∫–æ–Ω–∏—á–Ω—ã–º –∏ —á–∏—Ç–∞–µ–º—ã–º –±–ª–∞–≥–æ–¥–∞—Ä—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ —Å `createReactStore`.

---

# üß© –§–∏–Ω–∞–ª—å–Ω—ã–π –ø—Ä–∏–º–µ—Ä –∏–≥—Ä—ã 15-–ø–∞–∑–ª

---

## `store.ts` ‚Äî –≥–ª–æ–±–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –∏ –ª–æ–≥–∏–∫–∞ –∏–≥—Ä—ã

```ts
import { createReactStore } from "./createReactStore";

type Cell = number | null;
type Board = Cell[][];

export type PuzzleState = {
  board: Cell[][];
  moves: number;
  isSolved: boolean;
};

// –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–≥—Ä—ã
export const puzzleStore = createReactStore<PuzzleState>({
  board: [
    [1, 2, 3, 4],
    [5, 6, 7, 8],
    [9, 10, 11, 12],
    [13, 14, 15, null],
  ],
  moves: 0,
  isSolved: false,
});

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Ä–µ—à—ë–Ω–Ω–æ—Å—Ç—å
const checkSolved = (board: Board): boolean => {
  const flat = board.flat();
  return flat.every((val, i) =>
    i === flat.length - 1 ? val === null : val === i + 1
  );
};

// –ü–æ–∏—Å–∫ –ø—É—Å—Ç–æ–π –ø–ª–∏—Ç–∫–∏
const findEmpty = (board: Board) => {
  for (let r = 0; r < 4; r++)
    for (let c = 0; c < 4; c++)
      if (board[r][c] === null) return { row: r, col: c };
  throw new Error("Empty tile not found");
};

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Ö–æ–¥–∞
const canMove = (r: number, c: number, empty: { row: number; col: number }) =>
  (Math.abs(r - empty.row) === 1 && c === empty.col) ||
  (Math.abs(c - empty.col) === 1 && r === empty.row);

// –•–æ–¥ –∏–≥—Ä–æ–∫–∞
export const moveTile = (row: number, col: number) => {
  const board = puzzleStore.get("board");
  const empty = findEmpty(board);
  if (canMove(row, col, empty)) {
    puzzleStore.batch(() => {
      puzzleStore.update(`board.${empty.row}.${empty.col}`, board[row][col]);
      puzzleStore.update(`board.${row}.${col}`, null);
      puzzleStore.update("moves", (m) => m + 1);
      puzzleStore.update("isSolved", checkSolved(board));
    });
  }
};

// –ü–µ—Ä–µ–º–µ—à–∏–≤–∞–Ω–∏–µ –ø–ª–∏—Ç–æ–∫
export const shuffle = () => {
  puzzleStore.batch(() => {
    const flat = puzzleStore
      .get("board")
      .flat()
      .sort(() => Math.random() - 0.5);
    const board: Board = [];
    for (let i = 0; i < 4; i++) {
      board.push(flat.slice(i * 4, i * 4 + 4));
    }
    puzzleStore.update("board", board);
    puzzleStore.update("moves", 0);
    puzzleStore.update("isSolved", false);
  });
};
```

---

## `Tile.tsx` ‚Äî –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ–¥–Ω–æ–π –ø–ª–∏—Ç–∫–∏

```tsx
import { memo } from "react";
import { moveTile, puzzleStore } from "./store";

export const Tile = memo(({ row, col }: { row: number; col: number }) => {
  const [value] = puzzleStore.useStore([`board.${row}.${col}`]);
  const [isSolved] = puzzleStore.useStore(["isSolved"]);

  return (
    <button
      className="tile"
      onClick={() => moveTile(row, col)}
      disabled={value === null || isSolved}
    >
      {value}
    </button>
  );
});
```

---

## `PuzzleGame.tsx` ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∏–≥—Ä—ã

```tsx
import "./styles.css";
import { puzzleStore, shuffle } from "./store";
import { Tile } from "./Tile";

export const PuzzleGame = () => {
  const [moves, isSolved] = puzzleStore.useStore(["moves", "isSolved"]);

  return (
    <div className="puzzle-game">
      <h1>15 Puzzle</h1>
      <div className="controls">
        <button onClick={shuffle}>Shuffle</button>
        <span>Moves: {moves}</span>
      </div>
      {isSolved && <div className="victory">You won! üéâ</div>}
      <div className="board">
        {Array.from({ length: 4 }, (_, row) => (
          <div key={row} className="row">
            {Array.from({ length: 4 }, (_, col) => (
              <Tile key={`${row}-${col}`} row={row} col={col} />
            ))}
          </div>
        ))}
      </div>
    </div>
  );
};
```

---

## `styles.css` ‚Äî —Å—Ç–∏–ª–∏ –∏–≥—Ä—ã

```css
.puzzle-game {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 16px;
  font-family: sans-serif;
}

.controls {
  display: flex;
  gap: 16px;
  align-items: center;
}

.board {
  display: grid;
  grid-template-rows: repeat(4, 80px);
  grid-template-columns: repeat(4, 80px);
  gap: 4px;
}

.row {
  display: contents;
}

.tile {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #6200ee;
  color: white;
  font-size: 24px;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  transition: transform 0.2s;
}

.tile:disabled {
  background: #121212;
  cursor: not-allowed;
}

.tile:hover:not(:disabled) {
  transform: scale(1.03);
}

.victory {
  font-size: 24px;
  color: #4caf50;
  font-weight: bold;
}
```

---

–í–æ—Ç –ø–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ —Ç–æ–≥–æ, **–∫–∞–∫ `createReactStore` —É–ø—Ä–æ—â–∞–µ—Ç –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä—É–µ—Ç –∫–æ–¥**, –Ω–∞ –ø—Ä–∏–º–µ—Ä–µ –∏–≥—Ä—ã –≤ 15-–ø–∞–∑–ª. –¢–∞–∫–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã **–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –º–µ—Ç–æ–¥–∞–º `createReactStore`**, —á—Ç–æ–±—ã –±—ã–ª–æ –ø–æ–Ω—è—Ç–Ω–æ, –∫–∞–∫ –æ–Ω–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∏ –∑–∞—á–µ–º –Ω—É–∂–Ω—ã.

---

# üß† –ö–∞–∫ `createReactStore` –¥–µ–ª–∞–µ—Ç –∫–æ–¥ —á–∏—â–µ –∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É –ø—Ä–æ—â–µ

### –î–æ `createReactStore`:

- –ø—Ä–∏—Ö–æ–¥–∏–ª–æ—Å—å –≤—Ä—É—á–Ω—É—é –ø–∏—Å–∞—Ç—å `useState`, `useReducer` –∏–ª–∏ `useContext`
- —Ç—Ä—É–¥–Ω–æ –¥–µ–ª–∏—Ç—å –≥–ª–æ–±–∞–ª—å–Ω–æ–µ –∏ –ª–æ–∫–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
- –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –±—ã–ª–æ –ø–æ–¥–ø–∏—Å—ã–≤–∞—Ç—å—Å—è –Ω–∞ —á–∞—Å—Ç—å –≤–ª–æ–∂–µ–Ω–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –±–µ–∑ –ª–∏—à–Ω–µ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞

### –° `createReactStore`:

- —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –≥–ª–æ–±–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
- –ø–æ–¥–ø–∏—Å–∫–∞ **—Ç–æ—á–µ—á–Ω–æ** –Ω–∞ –ª—é–±—ã–µ –ø—É—Ç–∏ (`board.2.3`)
- –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (–±–µ–∑ –ª–∏—à–Ω–∏—Ö —Ä–µ—Ä–µ–Ω–¥–µ—Ä–æ–≤)
- –≥–∏–±–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: –æ–±—ã—á–Ω—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º –∏–ª–∏ —Ñ—É–Ω–∫—Ü–∏–µ–π
- –ø–æ–¥–¥–µ—Ä–∂–∫–∞ `batch`, `invalidateCache`, `cacheKeys`, `useField`, –∏ –¥—Ä.

---

## üíæ `store.ts` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞

```ts
export const puzzleStore = createReactStore<PuzzleState>({
  board: [...],
  moves: 0,
  isSolved: false,
});
```

üìå **`createReactStore<T>(initialState)`**
–°–æ–∑–¥–∞—ë—Ç **—Ä–µ–∞–∫—Ç–∏–≤–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ** —Å–æ —Å–ª–µ–¥—É—é—â–∏–º–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏:

- `.useStore(paths, options?)` ‚Äî –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –º–∞—Å—Å–∏–≤ –ø—É—Ç–µ–π, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–µ—Ä–µ—Ä–∏—Å–æ–≤–∫–∞
- `.useField(path, options?)` ‚Äî –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –æ–¥–Ω–æ –ø–æ–ª–µ —Å —É–¥–æ–±–Ω–æ–π –∑–∞–ø–∏—Å—å—é
- `.update(path, value | fn)` ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ª—é–±–æ–≥–æ –≤–ª–æ–∂–µ–Ω–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è
- `.get(path)` ‚Äî —á—Ç–µ–Ω–∏–µ –≤–ª–æ–∂–µ–Ω–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è
- `.batch(fn)` ‚Äî —Å–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–µ–∑ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö —Ä–µ—Ä–µ–Ω–¥–µ—Ä–æ–≤
- `.reloadComponents(cacheKeys)` ‚Äî –≤—Ä—É—á–Ω—É—é —Ç—Ä–∏–≥–≥–µ—Ä–∏—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø–æ –∫–ª—é—á–∞–º

---

## ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏–π —Å `update`

```ts
puzzleStore.update("moves", (m) => m + 1);
```

üîÑ **`.update(path, newValue | updateFn)`**
–û–±–Ω–æ–≤–ª—è–µ—Ç –≤–ª–æ–∂–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —Å—Ç—Ä–æ–∫–æ–≤–æ–º—É –ø—É—Ç–∏. –ú–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å:

- –Ω–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ (`42`)
- —Ñ—É–Ω–∫—Ü–∏—é –æ—Ç —Ç–µ–∫—É—â–µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è (`(prev) => prev + 1`)

---

## üì¶ –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π —Å `batch`

```ts
puzzleStore.batch(() => {
  puzzleStore.update("moves", (m) => m + 1);
  puzzleStore.update("isSolved", checkSolved(board));
});
```

‚ö° **`.batch(fn)`**
–ü–æ–∑–≤–æ–ª—è–µ—Ç –æ–±–Ω–æ–≤–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–Ω–∞—á–µ–Ω–∏–π **–æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ**, –≤—ã–∑–≤–∞–≤ –ø–æ–¥–ø–∏—Å–∫–∏ —Ç–æ–ª—å–∫–æ **–æ–¥–∏–Ω —Ä–∞–∑**. –≠—Ç–æ —É—Å–∫–æ—Ä—è–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ª–∏—à–Ω–∏–µ —Ä–µ—Ä–µ–Ω–¥–µ—Ä—ã.

---

## üëÄ –ß—Ç–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å `get`

```ts
const board = puzzleStore.get("board");
```

üîç **`.get(path)`**
–ü–æ–ª—É—á–∞–µ—Ç —Ç–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —Å—Ç—Ä–æ–∫–æ–≤–æ–º—É –ø—É—Ç–∏. –ù–µ –≤—ã–∑—ã–≤–∞–µ—Ç –ø–æ–¥–ø–∏—Å–∫—É, –ø—Ä–æ—Å—Ç–æ —á–∏—Ç–∞–µ—Ç.

---

## üéØ –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —á–∞—Å—Ç–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å `useStore`

```tsx
const [moves, isSolved] = puzzleStore.useStore(["moves", "isSolved"]);
```

üëÇ **`.useStore(["path.a", "path.b"], options?)`**
–•—É–∫ –¥–ª—è –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ –æ–¥–∏–Ω –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—É—Ç–µ–π –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏. –ü—Ä–∏ –ª—é–±–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∑–Ω–∞—á–µ–Ω–∏–π –ø–æ —ç—Ç–∏–º –ø—É—Ç—è–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –±—É–¥–µ—Ç –ø–µ—Ä–µ—Ä–∏—Å–æ–≤–∞–Ω.

–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:

- –ø–æ–¥–ø–∏—Å–∫–∞ —Ç–æ–ª—å–∫–æ –Ω–∞ –Ω—É–∂–Ω—ã–µ –ø–æ–ª—è
- –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ—Ä–µ–Ω–¥–µ—Ä—ã
- –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ `cacheKeys` –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è –ø–æ–¥–ø–∏—Å–∫–∏ –≤—Ä—É—á–Ω—É—é

---

## ‚úçÔ∏è –ü–æ–¥–ø–∏—Å–∫–∞ + –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å `useField`

```tsx
const [theme, setTheme] = store.useField("settings.theme");
```

üõ†Ô∏è **`.useField(path)`**
–£–¥–æ–±–Ω—ã–π —Å–ø–æ—Å–æ–± –ø–æ–ª—É—á–∏—Ç—å:

- —Ç–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
- —Ñ—É–Ω–∫—Ü–∏—é `setValue` –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: `[value, setValue]`, –∫–∞–∫ `useState`, –Ω–æ –≥–ª–æ–±–∞–ª—å–Ω–æ.

---

## üß™ –†—É—á–Ω–æ–π –≤—ã–∑–æ–≤ –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤ —Å `reloadComponents`

```ts
puzzleStore.reloadComponents([["ui", "theme"]]);
```

üîÅ **`.reloadComponents(cacheKeys)`**
–ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ –≤—ã–∑—ã–≤–∞–µ—Ç –ø–µ—Ä–µ—Ä–∏—Å–æ–≤–∫—É –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤, –ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã—Ö –ø–æ —É–∫–∞–∑–∞–Ω–Ω—ã–º `cacheKeys`, –¥–∞–∂–µ –µ—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–µ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å.

---

## üß© `Tile.tsx` –∏ `PuzzleGame` ‚Äî –∫–∞–∫ –≤—Å—ë —Å—Ç–∞–ª–æ –ø—Ä–æ—â–µ

```tsx
const [value] = puzzleStore.useStore([`board.${row}.${col}`]);
```

üîπ –ü—Ä–æ—Å—Ç–∞—è –ø–æ–¥–ø–∏—Å–∫–∞ —Ç–æ–ª—å–∫–æ –Ω–∞ –Ω—É–∂–Ω—É—é —è—á–µ–π–∫—É
üîπ –ù–µ –Ω—É–∂–µ–Ω `useContext`, `memo`, –∏–ª–∏ –≥–ª—É–±–æ–∫–∞—è –ø—Ä–æ–ø-—Ü–µ–ø–æ—á–∫–∞

---

```tsx
puzzleStore.update("isSolved", checkSolved(board));
```

üîπ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
üîπ –õ–æ–≥–∏–∫–∞ –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ç–µ–ø–µ—Ä—å —Ä—è–¥–æ–º, —á–∏—Ç–∞–µ–º–æ –∏ —É–¥–æ–±–Ω–æ

---

# ‚ú® –ß—Ç–æ –≤—ã–∏–≥—Ä—ã–≤–∞–µ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫

| –î–æ                                    | –° `createReactStore`                    |
| ------------------------------------- | --------------------------------------- |
| –ú—É—Ç–æ—Ä–Ω—ã–µ `useReducer` –∏ `dispatch`    | –ü—Ä–æ—Å—Ç–æ–π `.update()`                     |
| –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –ø–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ `user.name` | `useStore(["user.name"])` —Ä–∞–±–æ—Ç–∞–µ—Ç üí°   |
| –°–ª–æ–∂–Ω–æ—Å—Ç—å —Å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π —Ä–µ—Ä–µ–Ω–¥–µ—Ä–æ–≤   | –¢–æ—á–Ω–∞—è –ø–æ–¥–ø–∏—Å–∫–∞ –ø–æ –ø—É—Ç–∏, `batch`        |
| –†—É—á–Ω–æ–µ –ø—Ä–æ–±—Ä–∞—Å—ã–≤–∞–Ω–∏–µ –ø—Ä–æ–ø—Å–æ–≤ –≤–Ω–∏–∑     | –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å store |
| –ù–µ—Ç –∫–æ–Ω—Ç—Ä–æ–ª—è –Ω–∞–¥ –ø–æ–¥–ø–∏—Å–∫–∞–º–∏           | –ï—Å—Ç—å `cacheKeys`, `reloadComponents`    |

---
