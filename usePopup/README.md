# `usePopup` ‚Äî —Ö—É–∫ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–æ–¥–∞–ª—å–Ω—ã–º–∏ –æ–∫–Ω–∞–º–∏

–•—É–∫ `usePopup` –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –≤ React. –û–Ω –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –Ω–∞–±–æ—Ä —Ñ—É–Ω–∫—Ü–∏–π –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π —É–¥–æ–±–Ω–æ –æ—Ç–∫—Ä—ã–≤–∞—Ç—å –∏ –∑–∞–∫—Ä—ã–≤–∞—Ç—å –º–æ–¥–∞–ª–∫–∏, –∞ —Ç–∞–∫–∂–µ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –ø–æ–≤–µ–¥–µ–Ω–∏–µ –∏ –≤–Ω–µ—à–Ω–∏–π –≤–∏–¥ —á–µ—Ä–µ–∑ —Å–≤–æ–π—Å—Ç–≤–∞.

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. –û–±—â–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ  
   1.1. [–ê—Ä–≥—É–º–µ–Ω—Ç—ã —Ö—É–∫–∞](#11-–∞—Ä–≥—É–º–µ–Ω—Ç—ã-—Ö—É–∫–∞)  
   1.2. [–í–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è](#12-–≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–µ-–∑–Ω–∞—á–µ–Ω–∏—è)  
   1.3. [–°–≤–æ–π—Å—Ç–≤–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ `<Popup />`](#13-—Å–≤–æ–π—Å—Ç–≤–∞-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞-popup-)

2. –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è  
   2.1. [–ë–∞–∑–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä](#21-–±–∞–∑–æ–≤—ã–π-–ø—Ä–∏–º–µ—Ä)  
   2.2. [–°—Ç–∏–ª–∏–∑–∞—Ü–∏—è –∏ –∞–Ω–∏–º–∞—Ü–∏—è](#22-—Å—Ç–∏–ª–∏–∑–∞—Ü–∏—è-–∏-–∞–Ω–∏–º–∞—Ü–∏—è)

3. `useSimplePopup` ‚Äî –æ–±—ë—Ä—Ç–∫–∞ –Ω–∞–¥ `usePopup`  
   3.1. [–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ](#31-–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ)  
   3.2. [–ü—Ä–∏–º–µ—Ä —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏](#32-–ø—Ä–∏–º–µ—Ä-—Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏)  
   3.3. [–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è](#33-–ø—Ä–∏–º–µ—Ä-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è)

4. [–ü—Ä–∏–º–µ—Ä: –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –≤ –º–æ–¥–∞–ª–∫–µ —á–µ—Ä–µ–∑ `ref`](#–ø—Ä–∏–º–µ—Ä-–ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ-–∫–æ–Ω—Ç–µ–Ω—Ç–∞-–≤-–º–æ–¥–∞–ª–∫–µ-—á–µ—Ä–µ–∑-ref )

5. [–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏](#4-—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏)

---

### 1.1. –ê—Ä–≥—É–º–µ–Ω—Ç—ã —Ö—É–∫–∞

| –ê—Ä–≥—É–º–µ–Ω—Ç | –¢–∏–ø    | –û–ø–∏—Å–∞–Ω–∏–µ                                                   |
| -------- | ------ | ---------------------------------------------------------- |
| `delay`  | number | –ó–∞–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–¥ –∑–∞–∫—Ä—ã—Ç–∏–µ–º (–≤ —Å–µ–∫—É–Ω–¥–∞—Ö). –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é ‚Äî `0`. |

---

### 1.2. –í–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è

| –ò–º—è             | –¢–∏–ø               | –û–ø–∏—Å–∞–Ω–∏–µ                                           |
| --------------- | ----------------- | -------------------------------------------------- |
| `isShowed`      | `boolean`         | –ü—Ä–∏–∑–Ω–∞–∫ —Ç–æ–≥–æ, –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –ª–∏ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ       |
| `toOpenPopup`   | `() => void`      | –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞               |
| `toTogglePopup` | `() => void`      | –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ |
| `toClosePopup`  | `() => void`      | –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è –æ–∫–Ω–∞                          |
| `Popup`         | `React.Component` | –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞, –≤—ã–≤–æ–¥–∏–º—ã–π —á–µ—Ä–µ–∑ –ø–æ—Ä—Ç–∞–ª  |

---

### 1.3. –°–≤–æ–π—Å—Ç–≤–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ `<Popup />`

| –°–≤–æ–π—Å—Ç–≤–æ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
| --- | --- | --- |
| `children` | `ReactNode` | –ö–æ–Ω—Ç–µ–Ω—Ç, –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º—ã–π –≤–Ω—É—Ç—Ä–∏ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ |
| `className` | `string` | –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ CSS-–∫–ª–∞—Å—Å—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, `"MWBottom"` –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏ —Å–Ω–∏–∑—É) |
| `isOnCloseBG` | `boolean` | –†–∞–∑—Ä–µ—à–∏—Ç—å –∑–∞–∫—Ä—ã—Ç–∏–µ –æ–∫–Ω–∞ –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ —Ñ–æ–Ω. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é ‚Äî `true` |
| `domPortalById` | `string` | ID DOM-—ç–ª–µ–º–µ–Ω—Ç–∞, –≤ –∫–æ—Ç–æ—Ä—ã–π —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –ø–æ—Ä—Ç–∞–ª. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é `'root'` –∏–ª–∏ `document.body` |

---

### 2.1. –ë–∞–∑–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä

```tsx
import usePopup from '@qtpy/use-popup';
import '@qtpy/use-popup/index.css';

function App() {
  const { isShowed, toOpenPopup, toClosePopup, Popup } = usePopup(0.3);

  return (
    <div>
      <button onClick={toOpenPopup}>–ü–æ–∫–∞–∑–∞—Ç—å</button>
      <Popup className="MWBottom" isOnCloseBG domPortalById="root">
        <h2>–ó–∞–≥–æ–ª–æ–≤–æ–∫</h2>
        <p>–ö–æ–Ω—Ç–µ–Ω—Ç –º–æ–¥–∞–ª–∫–∏</p>
        <button onClick={toClosePopup}>–ó–∞–∫—Ä—ã—Ç—å</button>
      </Popup>
    </div>
  );
}

export default App;
```

---

### 2.2. –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è –∏ –∞–Ω–∏–º–∞—Ü–∏—è

–ü—Ä–∏–º–µ—Ä —Å—Ç–∏–ª–µ–π –¥–ª—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞, –ø–æ—è–≤–ª—è—é—â–µ–≥–æ—Å—è —Å–Ω–∏–∑—É (`MWBottom`):

```css
@starting-style {
  .Popup.MWBottom .Popup_container {
    transform: translateY(100%);
  }
}

.Popup.MWBottom {
  &::before {
    opacity: 0;
    transition: opacity 0.6s;
  }

  &.isVisible::before {
    opacity: 0.8;
  }

  .Popup_container {
    transition: transform 0.6s ease-out;
    justify-content: flex-end;
    align-items: center;
  }

  &.isRemove .Popup_container {
    transform: translateY(180%);
  }
}
```

---

## `useSimplePopup` ‚Äî –æ–±—ë—Ä—Ç–∫–∞ –Ω–∞–¥ `usePopup`

### 3.1. –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

`useSimplePopup` ‚Äî —ç—Ç–æ –æ–±—ë—Ä—Ç–∫–∞ –Ω–∞–¥ `usePopup`, —É–ø—Ä–æ—â–∞—é—â–∞—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–æ–¥–∞–ª–∫–∏ —Å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–º —à–∞–±–ª–æ–Ω–æ–º. –ü–æ–ª–µ–∑–Ω–∞ –¥–ª—è –æ–¥–Ω–æ—Ç–∏–ø–Ω—ã—Ö –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω.

---

### 3.2. –ü—Ä–∏–º–µ—Ä —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

```tsx
// useSimplePopup.ts
import { useMemo } from 'react';
import usePopup from '@qtpy/use-popup';
import '@qtpy/use-popup/index.css';

export default function useSimplePopup() {
  const { Popup, toOpenPopup, toClosePopup, isShowed } = usePopup(0.5);

  return Popup.Memo({
    toOpenPopup,
    toClosePopup,
    isShowed,
    Popup: () => (
      <Popup className="MWBottom">
        <div style={{ padding: 20, background: '#fff', borderRadius: 8 }}>
          <h2>–ü—Ä–æ—Å—Ç–æ–µ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ</h2>
          <p>–≠—Ç–æ –∫–æ–Ω—Ç–µ–Ω—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.</p>
          <button onClick={toClosePopup}>–ó–∞–∫—Ä—ã—Ç—å</button>
        </div>
      </Popup>
    ),
  });
}
```

---

### 3.3. –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```tsx
// App.tsx
import useSimplePopup from './useSimplePopup';

export default function App() {
  const { toOpenPopup, Popup } = useSimplePopup();

  return (
    <div>
      <button onClick={toOpenPopup}>–û—Ç–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª–∫—É</button>
      <Popup />
    </div>
  );
}
```

---

### –ü—Ä–∏–º–µ—Ä: –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –≤ –º–æ–¥–∞–ª–∫–µ —á–µ—Ä–µ–∑ `ref`

```tsx
// useImperativePopup.tsx
import { useRef, useState, useImperativeHandle } from 'react';
import usePopup from '@qtpy/use-popup';

export default function useImperativePopup() {
  const { Popup, toOpenPopup, toClosePopup } = usePopup(0.2);

  // –ò–º–ø–µ—Ä–∞—Ç–∏–≤–Ω—ã–π ref
  const contentRef = useRef<Partial<{ setContent: (val: string) => void }>>({});

  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞
  const showWithContent = (text: string) => {
    toOpenPopup();
    setTimeout(() => {
      contentRef.current?.setContent?.(text);
    }, 10);
  };

  return Popup.Memo({
    toOpenPopup,
    toClosePopup,
    showWithContent, // ‚Üê –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–∑–≤–Ω–µ
    Popup: () => {
      const [content, setContent] = useState('–ü—Ä–∏–≤–µ—Ç!');

      useImperativeHandle(contentRef, () => ({
        setContent,
      }));

      return (
        <Popup className="MWBottom">
          <div style={{ padding: 20, background: '#fff' }}>
            <p>{content}</p>
            <button onClick={toClosePopup}>–ó–∞–∫—Ä—ã—Ç—å</button>
          </div>
        </Popup>
      );
    },
  });
}
```

---

### üîò –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```tsx
// App.tsx
import useImperativePopup from './useImperativePopup';

export default function App() {
  const { Popup, showWithContent } = useImperativePopup();

  return (
    <div>
      <button onClick={() => showWithContent('–≠—Ç–æ –∫–æ–Ω—Ç–µ–Ω—Ç 1')}>–ü–æ–∫–∞–∑–∞—Ç—å 1</button>
      <button onClick={() => showWithContent('–≠—Ç–æ –∫–æ–Ω—Ç–µ–Ω—Ç 2')}>–ü–æ–∫–∞–∑–∞—Ç—å 2</button>
      <Popup />
    </div>
  );
}
```
---

## 4. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `useSimplePopup`, –∫–æ–≥–¥–∞ —Ç—Ä–µ–±—É–µ—Ç—Å—è –±—ã—Å—Ç—Ä–æ–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –±–µ–∑ –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏–∏.
- –î–ª—è –±–æ–ª–µ–µ –≥–∏–±–∫–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—Ç–∏–ª—è–º–∏ –∏ –ø–æ–≤–µ–¥–µ–Ω–∏–µ–º ‚Äî –ø—Ä–∏–º–µ–Ω—è–π—Ç–µ `usePopup` –Ω–∞–ø—Ä—è–º—É—é.
- –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Å—Ç–∏–ª–∏–∑—É–π—Ç–µ –∫–ª–∞—Å—Å—ã `.Popup`, `.Popup_container` –∏ –∞–Ω–∏–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è (`.isVisible`, `.isRemove`) –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å UX/UI –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
- –ù–µ –∑–∞–±—É–¥—å—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å –∫–æ—Ä–Ω–µ–≤–æ–π —ç–ª–µ–º–µ–Ω—Ç —Å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º ID (`root`), –µ—Å–ª–∏ –æ–Ω –Ω–µ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ –≤–∞—à–µ–º DOM.
